---
import { type TProductCategory } from "@rxdrag/website-lib-core";
import { Collapse, CollapseTrigger, Motion, CollapsePanel, Link } from "@rxdrag/website-lib";

interface Props {
  title?: string;
  class?: string;
  categories?: TProductCategory[];
}
const { title = "Products", class: className, categories } = Astro.props;---

<Collapse class="flex flex-col relative">
  <CollapseTrigger class:list={["flex items-center gap-x-1", className]}>
    {title}
    <Motion
      as="span"
      class="h-5 w-5 flex-none text-foreground"
      id="products-arrow"
      whileOpenable={{ open: { rotate: 180 }, close: { rotate: 0 } }}
    >
      <svg
        aria-hidden="true"
        fill="currentColor"
        focusable="false"
        height="1.25rem"
        viewBox="0 0 24 24"
        width="1.25rem"
      >
        <path d="M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6z"></path>
      </svg>
    </Motion>
  </CollapseTrigger>
  <CollapsePanel
    class:list={["light", "box-border", "h-0 opacity-1 overflow-hidden"]}
    whileOpenable={{
      initial: {
        height: 0,
      },
      open: {
        to: {
          height: "auto",
        },
        duration: 0.6,
        ease: "power3.out",
      },
      close: {
        to: {
          height: 0,
        },
        duration: 0.25,
        ease: "power2.in",
      },
    }}
  >
    {
      categories?.map((category) => (
        <Link
          class="w-full rounded-md flex items-center gap-x-2 text-foreground-secondary p-2"
          type="product-category"
          to={category?.slug}
        >
          {category.name}
        </Link>
      ))
    }
  </CollapsePanel>
</Collapse>
